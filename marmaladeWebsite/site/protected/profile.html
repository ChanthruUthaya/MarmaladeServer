<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-GB" xml:lang="en-GB">

<head>
  <meta charset="UTF-8" />
  <link href="https://fonts.googleapis.com/css?family=Work+Sans:500,500i,600,600i,700,700i,800,800i,900,900i&display=swap" rel="stylesheet">
  <title>Marmalade</title>
  <link rel="stylesheet" type="text/css" href="vendors/css/normalize.css">
  <link rel="stylesheet" type="text/css" href="vendors/css/grid.css">
  <link rel="stylesheet" type="text/css" href="vendors/css/ionicons.min.css">
  <link rel="stylesheet" type="text/css" href="vendors/css/animate.css">
  <link rel="stylesheet" type="text/css" href="resources/css/style.css">
</head>
<body>
  <header>
    <nav>
      <div class="row">
        <ul id="navbar" class="main-nav js--main-nav">
        </ul>
      </div>
    </nav>
    <div class="big-text-box">
      <h1 id="usertext">profile</h1>
    </div>
  </header>
  <form method="post" enctype="multipart/form-data" action="/upload/image">
    <input type="file" name="uploadImage">
    <input type="submit" value="Submit">
  </form>
  <div id="picture" class="wrapper">
  </div>
  <script src=./JS/navbar.js>
  </script>
  <script>
    var frame = document.getElementById("picture");
    var username = document.getElementById("usertext");

    fetch('/getdata',{
        method: 'get',
    }).then(res=> res.json()
    ).then((data)=>{
        username.innerHTML = data.username;
        for(const image of data.images){
            var div = document.createElement("div");
            var image_name = image.Path.split("\\")[2];
            var img = document.createElement("img");
            img.src = image_name;
            console.log(image_name);
            var button = document.createElement("button");
            button.textContent = 'delete';
            button.id = image.PhotoID.toString();
            const params = new URLSearchParams({
              id: image.PhotoID,
              src: image_name
            });
            button.onclick = function(){
              fetch('/delete', {
                method: 'DELETE',
                body: params
              }).then(location.reload())
            }
            div.appendChild(img);
            div.appendChild(button);
            frame.appendChild(div);
        }
    }
    );
  </script>
  <div class="wrapper">
    <div>
      <h2>
        We are reinventing how younger communities interact with local, impactful charities
      </h2>
    </div>
    <div>
      <img src="resources/img/iamarts.png" alt="iamarts">
    </div>
  </div>
  <body>
  </body>
</html>
